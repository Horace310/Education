webpackJsonp([77],{PM7Z:function(e,t){},VbPt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("NYxO");var o=a("VqYF"),n=a("XLwt"),i=a.n(n),r=(a("2sv3"),{inject:["reload"],props:{className:{type:String,default:"yourClassName"},id:{type:String,default:"yourID"},width:{type:String,default:"100%"},height:{type:String,default:"500px"}},data:function(){return{chart:null,knowledge:"",data2:{},textBookId:0,listName:{},bookId:0,learnCode:0,search:"",searchData:{}}},created:function(){var e=this;o.a.$on("getData",function(t){e.listName=t}),o.a.$on("msg",function(t){e.bookId=t}),o.a.$on("bookId",function(t){e.bookId=t}),e.queryTestBookDetail()},mounted:function(){},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{searchKnow:function(){var e=this,t={gradeId:this.bookId,name:this.search};this.$post("/likework/queryTestBookByChapterName.do",t).then(function(t){"5000"==t.code&&(e.searchData=t.data,e.searchData.forEach(function(t){var a={children:[]};a.name=t.label;var o={list:t.list};a=e.setleafCountTree(o,a),e.data2=a}))})},createLearnCode:function(){var e=this,t={gradeId:this.bookId};this.$post("/likework/createLearnCode.do",t).then(function(t){"5000"==t.code&&e.$alert(t.data,"您的知识码为:",{confirmButtonText:"确定"})})},addKnow:function(){},setleafCountTree:function(e,t){if(e.list){for(var a=0;a<e.list.length;a++)t.children.push({value:e.list[a].id,collapsed:!1,name:e.list[a].label,children:[]}),this.setleafCountTree(e.list[a],t.children[a]);return t}return 1},queryTestBookDetail:function(e){var t=this;this.$post("/likework/queryTestBookDetail.do",{gradeId:1}).then(function(e){var a={children:[],name:"总纲"};a.children=[];var o={list:e.data};return a=t.setleafCountTree(o,a),t.data2=a,t.drawChart(),!1})},changeText:function(e){var t=this;this.$prompt("请输入修改单元名","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){"confirm"===a.action&&t.$post("/likework/updateBookDetail.do",{gradeId:t.bookId,changeId:e,changeName:a.value,flag:3}).then(function(e){"5000"==e.code?(t.$message({type:"success",message:"修改成功"}),t.reload()):t.$message.error("修改失败")})})},getEchartsData:function(){var e={children:[]};e.name=this.listName.label;var t={list:this.listName.list};e=this.setleafCountTree(t,e),this.data2=e,this.drawChart()},drawChart:function(){this.chart=i.a.init(this.$refs.myEchart),this.chart.showLoading(),this.chart.hideLoading();var e={title:{text:""},tooltip:{},animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",label:{normal:{show:!0,textStyle:{fontSize:12}}},legend:{x:"center",show:!1,data:["包含","包含","包含"]},series:[{type:"graph",layout:"force",symbolSize:45,focusNodeAdjacency:!0,roam:!0,categories:[{name:"per",itemStyle:{normal:{color:"#009800"}}},{name:"loc",itemStyle:{normal:{color:"#4592FF"}}},{name:"org",itemStyle:{normal:{color:"#ff232b"}}},{name:"time",itemStyle:{normal:{color:"#e6dd1c"}}},{name:"body",itemStyle:{normal:{color:"#c489e6"}}},{name:"sigos",itemStyle:{normal:{color:"#a0e6a5"}}},{name:"check",itemStyle:{normal:{color:"#e6bfac"}}},{name:"disease",itemStyle:{normal:{color:"#859f89"}}},{name:"treatmeot",itemStyle:{normal:{color:"#686767"}}}],label:{normal:{show:!0,textStyle:{fontSize:12}}},force:{repulsion:1e3},edgeSymbolSize:[4,50],edgeLabel:{normal:{show:!0,textStyle:{fontSize:10},formatter:"{c}"}},data:this.data2,links:[{source:0,target:1,category:0,value:"包含"}],lineStyle:{normal:{opacity:.9,width:1,curveness:0,color:"#504a48"}}}]};this.chart.setOption(e)}},computed:{listenshowpage1:function(){return this.bookId},changeName:function(){return this.listName}},watch:{listenshowpage1:function(e,t){this.queryTestBookDetail(e)},changeName:function(e){this.getEchartsData()}}}),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bigBox"},[a("div",{ref:"myEchart",class:e.className,staticStyle:{"box-sizing":"border-box"},style:{height:"710px",width:"700px"},attrs:{id:e.id},on:{click:e.addKnow}}),e._v(" "),a("div",{staticClass:"searchs"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"serch",placeholder:"搜索知识点"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),a("i",{staticClass:"el-icon-search",on:{click:e.searchKnow}})])])},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("PM7Z")},null,null);t.default=l.exports}});
//# sourceMappingURL=77.6b2547e239246587c797.js.map