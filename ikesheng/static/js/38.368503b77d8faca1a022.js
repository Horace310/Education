webpackJsonp([38],{"23I9":function(e,r){},jrfr:function(e,r){},nwO2:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={name:"researchResult",components:{Gagination:t("+ryu").a},data:function(){return{centerDialogVisible:!1,radio4:"我的成果",tableData:[],shows:!1,pageSize:10,pageNum:1,total:0,check:!1,ruleForm:{name:"",desc:""},dialogTitle:"发表研究成果",rules:{name:[{required:!0,message:"请填写成果名称",trigger:"blur"}],desc:[{required:!0,message:"请输入您要填写的内容",trigger:"blur"}]}}},created:function(){this.queryResearcherByTeacher(),this.shows=!0,this.$store.state.resnav="3",this.$store.state.cgnav="我的成果"},methods:{publish:function(e){this.centerDialogVisible=!this.centerDialogVisible,this.check=!1,this.ruleForm.name="",this.ruleForm.desc=""},submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;if(r.check)return r.centerDialogVisible=!r.centerDialogVisible,!1;var t=r.$loading({lock:!0,text:"提交中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",target:document.querySelector(".submit-test-dialog")});r.$post("/likework/createResearcher.do",{researcherName:r.ruleForm.name,content:r.ruleForm.desc}).then(function(e){"5000"==e.code?(t.close(),r.$message({showClose:!0,message:"创建成功",type:"success"}),r.$refs.ruleForm.resetFields(),r.centerDialogVisible=!1,r.tableData=[],"热门成果"==r.radio4?(r.shows=!1,r.queryResearcherByTeacherss()):"最新成果"==r.radio4?(r.shows=!1,r.queryResearcherByTeachers()):"我的成果"==r.radio4&&(r.shows=!0,r.queryResearcherByTeacher())):(t.close(),r.$message({showClose:!0,message:e.message,type:"error"}))})})},callOf:function(e){this.centerDialogVisible=!1,this.$refs[e].resetFields()},closeDialog:function(){this.centerDialogVisible=!1,this.$refs.ruleForm.resetFields()},handleSizeChangeFun:function(e){this.pageSize=e,"热门成果"==this.radio4?(this.shows=!1,this.queryResearcherByTeacherss()):"最新成果"==this.radio4?(this.shows=!1,this.queryResearcherByTeachers()):"我的成果"==this.radio4&&(this.shows=!0,this.queryResearcherByTeacher())},handleCurrentChangeFun:function(e){this.pageNum=e,"热门成果"==this.radio4?(this.shows=!1,this.queryResearcherByTeacherss()):"最新成果"==this.radio4?(this.shows=!1,this.queryResearcherByTeachers()):"我的成果"==this.radio4&&(this.shows=!0,this.queryResearcherByTeacher())},queryResearcherByTeacher:function(){var e=this,r=[];this.$post("/likework/queryResearcherByTeacher.do").then(function(t){if("5000"==t.code){for(var a=0;a<t.data.rows.length;a++){var s={};s.researcherName=t.data.rows[a].researcherName,s.createTime=t.data.rows[a].createTime,s.view=t.data.rows[a].view,s.id=t.data.rows[a].id,s.num=[a],r[a]=s,e.tableData=r}e.total=t.data.count}})},queryResearcherByFlag:function(){"热门成果"==this.radio4?(this.shows=!1,this.queryResearcherByTeacherss()):"最新成果"==this.radio4?(this.shows=!1,this.queryResearcherByTeachers()):"我的成果"==this.radio4&&(this.shows=!0,this.queryResearcherByTeacher()),this.$store.state.cgnav=this.radio4},getNavType:function(){this.radio4=this.$store.state.cgnav},queryResearcherByTeacherss:function(){var e=this,r=[];this.tableData=[],this.$post("/likework/queryResearcherByTeacher.do",{flag:1}).then(function(t){if("5000"==t.code){for(var a=0;a<t.data.rows.length;a++){var s={};s.researcherName=t.data.rows[a].researcherName,s.createTime=t.data.rows[a].createTime,s.view=t.data.rows[a].view,s.id=t.data.rows[a].id,s.num=[a],r[a]=s,e.tableData=r}e.total=t.data.count}})},queryResearcherByTeachers:function(){var e=this,r=[];this.tableData=[],this.$post("/likework/queryResearcherByTeacher.do",{flag:2}).then(function(t){if("5000"==t.code){for(var a=0;a<t.data.rows.length;a++){var s={};s.researcherName=t.data.rows[a].researcherName,s.createTime=t.data.rows[a].createTime,s.view=t.data.rows[a].view,s.id=t.data.rows[a].id,s.num=[a],r[a]=s,e.tableData=r}e.total=t.data.count}})},handleEdit:function(e,r){var t=this;console.log(e,r);var a={researcherId:r.id};this.$post("/likework/queryResearcherById.do",a).then(function(e){"5000"==e.code&&(t.check=!0,t.ruleForm.name=e.data.researcherName,t.ruleForm.desc=e.data.content,t.dialogTitle="查看研究成果",t.centerDialogVisible=!t.centerDialogVisible)})},handleDelete:function(e){var r=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){r.$post("/likework/deleteResearcherById.do",{researcherId:e.row.id}).then(function(t){"5000"==t.code?(r.$message({message:"删除成功",type:"success"}),r.tableData.splice(e.$index,1),"热门成果"==r.radio4?r.queryResearcherByTeacherss():"最新成果"==r.radio4?r.queryResearcherByTeachers():"我的成果"==r.radio4&&r.queryResearcherByTeacher()):r.$message({showClose:!0,message:t.message,type:"error"})})}).catch(function(){})}},watch:{"$store.state.cgnav":"getNavType"}},s={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"researchResult bf  bx mt20 posr"},[t("div",{staticClass:"sec flexbox flexcenter"},[t("div",{staticClass:"flex",staticStyle:{"margin-top":"20px"}},[t("el-radio-group",{attrs:{size:"medium"},on:{change:e.queryResearcherByFlag},model:{value:e.radio4,callback:function(r){e.radio4=r},expression:"radio4"}},[t("el-radio-button",{attrs:{label:"我的成果"}}),e._v(" "),t("el-radio-button",{attrs:{label:"热门成果"}}),e._v(" "),t("el-radio-button",{attrs:{label:"最新成果"}})],1)],1),e._v(" "),t("div",[t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.publish}},[e._v("发表成果")])],1)]),e._v(" "),t("div",{staticClass:"courseCon bf "},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{label:"成果名称",align:"center",prop:"researcherName",width:"300"}}),e._v(" "),t("el-table-column",{attrs:{label:"上传时间",prop:"createTime",align:"center",width:"400"}}),e._v(" "),t("el-table-column",{attrs:{label:"人气",prop:"view",align:"center",width:"200"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{staticClass:"scan",attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(r.$index,r.row)}}},[e._v("查看")]),e._v(" "),e.shows?t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(r)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),t("div",{staticClass:"paginationed"},[t("Gagination",{attrs:{total:e.total,"page-size":e.pageSize},on:{handleSizeChangeSub:e.handleSizeChangeFun,handleCurrentChangeSub:e.handleCurrentChangeFun}})],1),e._v(" "),t("el-dialog",{attrs:{visible:e.centerDialogVisible,"before-close":e.closeDialog,title:e.dialogTitle,width:"30%"},on:{"update:visible":function(r){e.centerDialogVisible=r}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"成果名称",prop:"name"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入作业成果的名称",readonly:e.check},model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"成果内容",prop:"desc"}},[t("el-input",{attrs:{type:"textarea",readonly:e.check,resize:"none",placeholder:"请输入您要填写的内容"},model:{value:e.ruleForm.desc,callback:function(r){e.$set(e.ruleForm,"desc",r)},expression:"ruleForm.desc"}})],1),e._v(" "),t("el-form-item",[t("span",{staticClass:"dialog-footer tc"},[t("el-button",{on:{click:function(r){return e.callOf("ruleForm")}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)])],1)],1)],1)])},staticRenderFns:[]};var i=t("VU/8")(a,s,!1,function(e){t("jrfr"),t("23I9")},"data-v-4ee19b06",null);r.default=i.exports}});
//# sourceMappingURL=38.368503b77d8faca1a022.js.map