webpackJsonp([11],{"2S8+":function(e,t,r){"use strict";var a={name:"createClass",props:{centerDialogVisible:{type:Boolean,default:!1}},data:function(){return{checked:!0,createClass:[],andSubjectList:[],ruleForm2:{name:"",subjectId:"",gradeIds:""},rules2:{name:[{required:!0,message:"请输入班级名称",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}],gradeIds:[{required:!0,message:"请选择年级",trigger:"change"}],subjectId:[{required:!0,message:"请选择科目",trigger:"change"}]},gradeId:"",activeIndex:""}},created:function(){this.queryGradeAndSubjectList()},methods:{callOf:function(e){this.$emit("callOf",!1),this.$refs[e].resetFields()},closeDialog:function(){this.$emit("closeDialog",!1),this.$refs.ruleForm2.resetFields()},currentSel:function(e){this.gradeId=e.gradeId,this.andSubjectList=e.list},queryGradeAndSubjectList:function(){var e=this;this.$post("/likework/queryGradeAndSubjectList.do").then(function(t){"5000"==t.code&&(e.createClass=t.data)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var r=t.$loading({lock:!0,text:"提交中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",target:document.querySelector(".submit-test-dialog")});t.$post("/likework/createClass.do",{subjectId:t.ruleForm2.subjectId,gradeId:t.gradeId,name:t.ruleForm2.name}).then(function(e){"5000"==e.code?(r.close(),t.$message({showClose:!0,message:"创建班级成功",type:"success"}),t.$emit("submitForm",!1)):(r.close(),t.$message({showClose:!0,message:e.message,type:"error"}))})})}}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"creatClassed",model:{value:e.centerDialogVisible,callback:function(t){e.centerDialogVisible=t},expression:"centerDialogVisible"}},[r("el-dialog",{attrs:{visible:e.centerDialogVisible,"before-close":e.closeDialog,title:"创建班级",width:"40%"},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[r("div",{staticClass:"con"},[r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"100px"}},[r("el-form-item",{staticClass:"pas_icon inp",attrs:{label:"班级名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入班级名称"},model:{value:e.ruleForm2.name,callback:function(t){e.$set(e.ruleForm2,"name",e._n(t))},expression:"ruleForm2.name"}})],1),e._v(" "),r("el-form-item",{staticClass:"sec",attrs:{label:"班级属性",prop:"gradeIds"}},[r("el-select",{attrs:{placeholder:"请选择年级","value-key":"gradeId"},on:{change:e.currentSel},model:{value:e.ruleForm2.gradeIds,callback:function(t){e.$set(e.ruleForm2,"gradeIds",t)},expression:"ruleForm2.gradeIds"}},e._l(e.createClass,function(e){return r("el-option",{key:e.gradeId,attrs:{label:e.gradeName,value:e}})}),1)],1),e._v(" "),r("el-form-item",{staticClass:"sec",attrs:{label:"",prop:"subjectId"}},[r("el-select",{attrs:{placeholder:"请选择科目"},model:{value:e.ruleForm2.subjectId,callback:function(t){e.$set(e.ruleForm2,"subjectId",t)},expression:"ruleForm2.subjectId"}},e._l(e.andSubjectList,function(e,t){return r("el-option",{key:e.id,attrs:{label:e.subjectName,value:e.id}})}),1)],1),e._v(" "),r("el-form-item",[r("el-button",{on:{click:function(t){return e.callOf("ruleForm2")}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm2")}}},[e._v("确定")])],1)],1)],1)])],1)},staticRenderFns:[]};var s=r("VU/8")(a,o,!1,function(e){r("UHWG"),r("MkPW")},"data-v-e045213c",null);t.a=s.exports},MkPW:function(e,t){},"S4b+":function(e,t){},UHWG:function(e,t){},pAtM:function(e,t){},tnoD:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("RRo+"),o=r.n(a),s=r("Iy4B"),i=r("2S8+"),l={components:{Subjects:s.a,creatClass:i.a},data:function(){return{SubjectId:JSON.parse(sessionStorage.getItem("subjectId")),Conter:!0,centerDialogVisible:!1,answerindex:0,workKnow:[{label:"已布置",value:"1"},{label:"未布置",value:"2"}],workType:[{label:"巩固作业",value:"1"},{label:"测试作业",value:"2"}],special:[{label:"基础型",value:"1"},{label:"专题型",value:"2"},{label:"竞赛型",value:"3"}],difficulty:[{name:"解释性"},{name:"应用性"},{name:"拓展性"},{name:"自定义"}],difficultyindex:"",time:[{name:"宽松"},{name:"合适"},{name:"超时"},{name:"自定义"}],timeindex:"",target:[{name:"但一知识目标"},{name:"多知识目标"},{name:"自定义"}],homeworkId:"",types:[],questionList:[],ruleForm2:{type:"2",classIdList:[],account:"",horizontal:"",date1:"",desc:"",question:"",number:30},rules2:{type:[{required:!0,message:"请选择作业类型",trigger:"change"}],classIdList:[{required:!0,message:"请选择班级",trigger:"change"}],account:[{required:!0,message:"请输入作业名称",trigger:"blur"}],date1:[{required:!0,message:"请选择日期",trigger:"change"}],desc:[{required:!1,message:"请填写知识点",trigger:"blur"}],question:[{required:!1,message:"请填写解决问题",trigger:"blur"}],horizontal:[{required:!0,message:"请选择只是水平",trigger:"blur"}],number:[{required:!0,validator:function(e,t,r){if(!t)return r(new Error("请输入预计用时"));o()(Number(t))?r():r(new Error("请输入数字值"))},trigger:"blur"}]},identity:sessionStorage.getItem("identity"),createClass:[],show:!1,contentName:!0}},created:function(){var e=new Date;void 0==this.$route.query.contentName&&(this.contentName=!1,this.Conter=!1),this.homeworkId=this.$route.query.homeworkId,this.ruleForm2.account=this.$route.query.contentName,this.ruleForm2.date1=e.getFullYear()+"-"+this.addZore(Number(e.getMonth())+1)+"-"+this.addZore(e.getDate())+" 23:59:59",this.querySujectList(),this.QuestionType(),this.queryCreateClass(),this.queryHomeworkById()},mounted:function(){},methods:{printContent:function(e){var t=document.getElementById("subOutputRank-print").innerHTML,r=document.body.innerHTML;return document.body.innerHTML=t,window.print(),window.location.reload(),document.body.innerHTML=r,!1},addZore:function(e){return e<10?"0"+e:e},querySujectList:function(){var e=this;this.$post("/likework/querySujectList.do").then(function(t){if("5000"==t.code)for(var r in t.data)t.data[r].forEach(function(t,a){t.id==e.$route.query.subjectId&&(e.ruleForm2.horizontal="小学"==r?"1":"初中"==r?"2":"3")})})},changeClass:function(e){this.ruleForm2.classIdList=e},chooseWork:function(e){this.ruleForm2.type=e},close:function(){this.show=!1},againEdit:function(){this.$router.push({path:"/homeCommon/workCenter",query:{homeworkId:this.$route.query.homeworkId}})},submitFormq:function(e){this.centerDialogVisible=e,this.queryCreateClass()},closeDialog:function(e){this.centerDialogVisible=e},callOfa:function(e){this.centerDialogVisible=e},createClassed:function(){this.centerDialogVisible=!0},questions:function(e,t){var r=this;if(1==t)return this.show=!1,!1;var a=new Date(this.ruleForm2.date1),o={id:this.homeworkId,classIdList:this.ruleForm2.classIdList.join(":"),subjectId:this.$route.query.subjectId,textbookId:this.$route.query.textbookId,chapterId:this.$route.query.chapterId,barId:this.$route.query.barId,contentId:this.$route.query.contentId,homeworkName:this.ruleForm2.account,solveProblem:this.ruleForm2.question,knowledge:this.ruleForm2.desc,endTime:a.getFullYear()+"-"+this.addZore(a.getMonth()+1)+"-"+this.addZore(a.getDate())+" "+this.addZore(a.getHours())+":"+this.addZore(a.getMinutes())+":"+this.addZore(a.getSeconds()),expectTime:this.ruleForm2.number,level:this.ruleForm2.horizontal,type:this.ruleForm2.type};this.$refs.ruleForm2.validate(function(e){if(!e)return!1;r.$post("/likework/updateClassHomework.do",o).then(function(e){"5000"==e.code&&r.publishHomeworkById(e.data)})})},queryCreateClass:function(){var e=this;this.$post("/likework/queryCreateClass.do").then(function(t){"5000"==t.code&&(e.createClass=t.data,e.classId=t.data[0].id)})},release:function(){this.show=!this.show},publishHomeworkById:function(e){var t=this,r={homeworkId:e};this.$post("/likework/publishHomeworkById.do",r).then(function(e){"5000"==e.code&&(t.$message({showClose:!0,message:"发布作业成功!",type:"success"}),t.$router.push({path:"/homeCommon/workCenter/unworkable",query:{flag:"1"}}))})},QuestionType:function(e){var t=this,r={subjectId:this.subjectId};this.$post("/likework/queryQuestionTypeSelect.do",r).then(function(e){"5000"==e.code&&(t.types=e.data)})},nandu:function(e,t){this.difficulty.forEach(function(r,a){r.name==e&&t(a)})},shijian:function(e,t){this.time.forEach(function(r,a){r.name==e&&t(a)})},mubiao:function(e,t){this.target.forEach(function(r,a){r.name==e&&t(a)})},leixing:function(e,t){this.types.forEach(function(r,a){r.id==e&&t(a)})},queryHomeworkById:function(e){var t=this,r={homeworkId:this.homeworkId},a=this;this.$post("/likework/queryHomeworkById.do",r).then(function(e){if("5000"==e.code){t.solve=e.data.solveProblem,t.homeworkName=e.data.homeworkName;var r=[],o=[];e.data.classList.forEach(function(e,t){o.push(e.name),r.push(e.id)}),t.value=r,t.endTime=e.data.endTime,t.knowledge=e.data.knowledge,t.solveProblem=e.data.solveProblem,t.expectTime=e.data.expectTime,t.type=String(e.data.type),t.level=String(e.data.level),e.data.questionList.forEach(function(e,t){if(e.t=null,e.recorder=null,e.value="",e.checked=1,null===e.property)return e.difficultyindex=0,e.timeindex=0,e.targetindex=0,a.leixing(e.type,function(t){e.QuestionTypeindex=t}),!1;var r=JSON.parse(e.property);a.nandu(r["难度"],function(t){e.difficultyindex=t}),a.shijian(r["时间"],function(t){e.timeindex=t}),a.mubiao(r["目标"],function(t){e.targetindex=t}),a.leixing(e.type,function(t){e.QuestionTypeindex=t})}),t.questionList=e.data.questionList,t.queryCreateClass()}})}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"subject"},[r("div",{staticClass:"import-out"},[r("div",{ref:"print",staticClass:"title"},[e._v("作业预览")]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.Conter,expression:"Conter"}],staticClass:"model"},[r("div",{staticClass:"arrangement"},[r("div",{staticClass:"con submit-test-dialog"},[e.identity?e._e():r("p",{staticStyle:{"text-align":"center",color:"red"}},[e._v("请完善您的身份信息,以便布置作业")]),e._v(" "),r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"80px",inline:!0}},[r("el-form-item",{staticClass:"zh_icon",staticStyle:{width:"50%"},attrs:{label:"作业名称",prop:"account"}},[r("el-input",{staticStyle:{width:"183px"},attrs:{placeholder:"请输入作业名称"},on:{input:function(t){return e.ruleForm2.account=e.validForbid(t)}},model:{value:e.ruleForm2.account,callback:function(t){e.$set(e.ruleForm2,"account",e._n(t))},expression:"ruleForm2.account"}})],1),e._v(" "),r("el-form-item",{staticClass:"yzm",attrs:{label:"选择班级",prop:"classIdList"}},[r("el-select",{attrs:{placeholder:"请选择班级",multiple:""},on:{change:e.changeClass},model:{value:e.ruleForm2.classIdList,callback:function(t){e.$set(e.ruleForm2,"classIdList",t)},expression:"ruleForm2.classIdList"}},e._l(e.createClass,function(e,t){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),r("el-form-item",{staticClass:"bj",staticStyle:{width:"50%"},attrs:{label:"作业类型",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择作业类型"},model:{value:e.workType.label,callback:function(t){e.$set(e.workType,"label",t)},expression:"workType.label"}},e._l(e.workType,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",{staticClass:"zh_icon",attrs:{label:"专题",prop:"date1"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.special.value,callback:function(t){e.$set(e.special,"value",t)},expression:"special.value"}},e._l(e.special,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",{staticClass:"bj",staticStyle:{width:"50%"},attrs:{label:"展现分类",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择作业类型"},on:{change:e.chooseWork},model:{value:e.ruleForm2.type,callback:function(t){e.$set(e.ruleForm2,"type",t)},expression:"ruleForm2.type"}},[r("el-option",{attrs:{label:"结构化作业",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"非结构化作业(扩散性或探究型作业)",value:"2"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"布置情况",prop:"question"}},[r("el-select",{attrs:{placeholder:"请选择作业类型"},on:{change:e.chooseWork},model:{value:e.workKnow.label,callback:function(t){e.$set(e.workKnow,"label",t)},expression:"workKnow.label"}},e._l(e.workKnow,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",{staticClass:"bj",staticStyle:{width:"50%"},attrs:{label:"知识水平",prop:"horizontal"}},[r("el-select",{attrs:{placeholder:"请选择知识水平"},model:{value:e.ruleForm2.horizontal,callback:function(t){e.$set(e.ruleForm2,"horizontal",t)},expression:"ruleForm2.horizontal"}},[r("el-option",{attrs:{label:"初级",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"中级",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"高级",value:"3"}})],1)],1),e._v(" "),r("el-form-item",{staticClass:"zh_icon",attrs:{label:"预计用时",prop:"number"}},[r("el-input",{attrs:{placeholder:"请输入用时"},on:{input:function(t){return e.ruleForm2.number=e.validNumber(t)}},model:{value:e.ruleForm2.number,callback:function(t){e.$set(e.ruleForm2,"number",e._n(t))},expression:"ruleForm2.number"}},[r("template",{slot:"append"},[e._v("分钟")])],2)],1)],1)],1)])]),e._v(" "),r("Subjects",{attrs:{questionList:e.questionList}}),e._v(" "),e._e()],1)]),e._v(" "),r("div",{staticClass:"confirm",attrs:{id:"printMe"}},[e.contentName?r("el-button",{staticClass:"myBtn1",attrs:{type:"warning"},on:{click:function(t){return e.questions("ruleForm2","0")}}},[e._v("发布")]):e._e(),e._v(" "),r("el-button",{staticClass:"myBtn",attrs:{type:"primary"},on:{click:e.againEdit}},[e._v("重新编辑")]),e._v(" "),r("el-button",{staticClass:"myBtn",attrs:{type:"primary"},on:{click:e.printContent}},[e._v("打印")])],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.centerDialogVisible,expression:"centerDialogVisible"}],staticClass:"creatClass"},[r("creatClass",{attrs:{centerDialogVisible:e.centerDialogVisible},on:{callOf:e.callOfa,closeDialog:e.closeDialog,submitForm:e.submitFormq}})],1)])},staticRenderFns:[]};var u={name:"",data:function(){return{flag:this.$route.query.flag}},created:function(){this.$store.state.worknav="1"},components:{release:r("VU/8")(l,n,!1,function(e){r("S4b+")},"data-v-032270bf",null).exports}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("release",{attrs:{flag:this.flag}})],1)},staticRenderFns:[]};var d=r("VU/8")(u,c,!1,function(e){r("pAtM")},"data-v-5b37f300",null);t.default=d.exports}});
//# sourceMappingURL=11.11f77194e4168f24e312.js.map