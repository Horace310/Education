webpackJsonp([39],{"0Hj8":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"academicCircle",components:{Gagination:a("+ryu").a},data:function(){return{studentIdList:"",dialogVisible:!1,ruleForm:{name:""},ruleForms:{name:""},rules:{name:[{required:!0,message:"请填写学科圈名",trigger:"blur"}]},ruless:{name:[{required:!0,message:"请输入身份ID/用户名/手机号查找",trigger:"blur"}]},centerDialogVisible:!1,radio4:"我的学科圈",tableData:[],pageSize:10,pageNum:1,total:0,layout:"total,prev, pager, next, jumper",currentPage:2,show:!0,shows:!0,teacherByCondition:[],subjectGroupId:"",showsd:!1}},created:function(){this.show=!1,this.querySubjectGroupByTeacher(),this.$store.state.resnav="4",this.$store.state.cirnav="我的学科圈"},methods:{applyPeople:function(e){this.studentIdList!=e?this.studentIdList=e:this.studentIdList=""},findTeacherByCondition:function(e){this.dialogVisible=!0,this.subjectGroupId=e.row.id},submitForma:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=t.$loading({lock:!0,text:"提交中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",target:document.querySelector(".submit-test-dialog")});t.$post("/likework/inviteSubjectGroup.do",{subjectGroupId:t.subjectGroupId,studentIdList:t.studentIdList}).then(function(e){"5000"==e.code?(a.close(),t.$message({showClose:!0,message:"添加成功",type:"success"}),t.teacherByCondition=[],t.studentIdList="",t.$refs.ruleForms.resetFields(),t.dialogVisible=!1,t.showsd=!1,t.tableData=[],"最新学科圈"==t.radio4?t.querySubjectGroupByFlag2():"热门学科圈"==t.radio4?t.querySubjectGroupByFlag1():"我的学科圈"==t.radio4&&t.querySubjectGroupByTeacher()):(a.close(),t.$refs.ruleForms.resetFields(),t.dialogVisible=!1,t.teacherByCondition=[],t.studentIdList="",t.showsd=!1,t.$message({showClose:!0,message:e.message,type:"error"}))})})},applyJoinSubjectGroup:function(e){var t=this;this.$post("/likework/applyJoinSubjectGroup.do",{subjectGroupId:e.row.id}).then(function(e){"5000"==e.code?(t.$message({showClose:!0,message:"加入成功",type:"success"}),t.tableData=[],"最新学科圈"==t.radio4?t.querySubjectGroupByFlag2():"热门学科圈"==t.radio4?t.querySubjectGroupByFlag1():"我的学科圈"==t.radio4&&t.querySubjectGroupByTeacher()):t.$message({showClose:!0,message:e.message,type:"error"})})},handleDelete:function(e){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){t.$post("/likework/deleteSubjectGroupById.do",{subjectGroupId:e.row.id}).then(function(e){"5000"==e.code?(t.$message({showClose:!0,message:"删除成功",type:"success"}),t.tableData=[],"最新学科圈"==t.radio4?t.querySubjectGroupByFlag2():"热门学科圈"==t.radio4?t.querySubjectGroupByFlag1():"我的学科圈"==t.radio4&&t.querySubjectGroupByTeacher()):t.$message({showClose:!0,message:e.message,type:"error"})})}).catch(function(){})},callOf:function(e){this.centerDialogVisible=!1,this.$refs[e].resetFields()},callOfa:function(e){this.dialogVisible=!1,this.$refs[e].resetFields(),this.teacherByCondition=[],this.studentIdList="",this.showsd=!1},closeDialog:function(){this.centerDialogVisible=!1,this.$refs.ruleForm.resetFields()},closeDialoga:function(){this.dialogVisible=!1,this.$refs.ruleForms.resetFields(),this.teacherByCondition=[],this.studentIdList="",this.showsd=!1},submitForms:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.$loading({lock:!0,text:"提交中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",target:document.querySelector(".submit-test-dialog")});t.$post("/likework/findTeacherByCondition.do",{mobile:t.ruleForms.name}).then(function(e){"5000"==e.code?(a.close(),""==e.data?t.showsd=!1:(t.teacherByCondition=e.data,t.showsd=!0)):(a.close(),t.$message({showClose:!0,message:e.message,type:"error"}),t.showsd=!1)})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.$loading({lock:!0,text:"提交中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",target:document.querySelector(".submit-test-dialog")});t.$post("/likework/createSubjectGroup.do",{groupName:t.ruleForm.name}).then(function(e){"5000"==e.code?(a.close(),t.$message({showClose:!0,message:"创建成功",type:"success"}),t.$refs.ruleForm.resetFields(),t.centerDialogVisible=!1,t.tableData=[],"最新学科圈"==t.radio4?t.querySubjectGroupByFlag2():"热门学科圈"==t.radio4?t.querySubjectGroupByFlag1():"我的学科圈"==t.radio4&&t.querySubjectGroupByTeacher()):(a.close(),t.$message({showClose:!0,message:e.message,type:"error"}))})})},handleSizeChangeFun:function(e){this.pageSize=e,"最新学科圈"==this.radio4?this.querySubjectGroupByFlag2():"热门学科圈"==this.radio4?this.querySubjectGroupByFlag1():"我的学科圈"==this.radio4&&this.querySubjectGroupByTeacher()},handleCurrentChangeFun:function(e){console.log(e),this.pageNum=e,"最新学科圈"==this.radio4?this.querySubjectGroupByFlag2():"热门学科圈"==this.radio4?this.querySubjectGroupByFlag1():"我的学科圈"==this.radio4&&this.querySubjectGroupByTeacher()},studyCircle:function(){"最新学科圈"==this.radio4?(this.show=!0,this.shows=!1,this.pageNum=1,this.currentPage=1,this.querySubjectGroupByFlag2()):"热门学科圈"==this.radio4?(this.show=!0,this.shows=!1,this.pageNum=1,this.currentPage=1,this.querySubjectGroupByFlag1()):"我的学科圈"==this.radio4&&(this.show=!1,this.shows=!0,this.pageNum=1,this.currentPage=1,this.querySubjectGroupByTeacher()),this.$store.state.cirnav=this.radio4},getNavType:function(){this.radio4=this.$store.state.cirnav},querySubjectGroupByFlag1:function(){var e=this,t=[];this.tableData=[],this.$post("/likework/querySubjectGroupByFlag.do",{flag:1,indexNo:this.pageNum,rows:10}).then(function(a){if("5000"==a.code){for(var i=0;i<a.data.rows.length;i++){var o={};o.groupName=a.data.rows[i].groupName,o.createTime=a.data.rows[i].createTime,o.view=a.data.rows[i].view,o.id=a.data.rows[i].id,o.joinState=a.data.rows[i].joinState,o.num=[i],t[i]=o,e.tableData=t}e.count=a.data.count,e.total=a.data.count}})},querySubjectGroupByFlag2:function(){var e=this,t=[];this.tableData=[],this.$post("/likework/querySubjectGroupByFlag.do",{flag:2,indexNo:this.pageNum,rows:10}).then(function(a){if("5000"==a.code){for(var i=0;i<a.data.rows.length;i++){var o={};o.groupName=a.data.rows[i].groupName,o.createTime=a.data.rows[i].createTime,o.view=a.data.rows[i].view,o.joinState=a.data.rows[i].joinState,o.id=a.data.rows[i].id,o.num=[i],t[i]=o,e.tableData=t}e.total=a.data.count}})},querySubjectGroupByTeacher:function(){var e=this,t=[];this.tableData=[],this.$post("/likework/querySubjectGroupByTeacher.do",{indexNo:this.pageNum,rows:10}).then(function(a){if("5000"==a.code){for(var i=0;i<a.data.rows.length;i++){var o={};o.groupName=a.data.rows[i].groupName,o.createTime=a.data.rows[i].createTime,o.view=a.data.rows[i].view,o.joinState=a.data.rows[i].joinState,o.id=a.data.rows[i].id,o.num=[i],t[i]=o,e.tableData=t}e.total=a.data.count}})},handleEdit:function(e,t){}},watch:{"$store.state.cirnav":"getNavType"}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"academicCircle bf  bx mt20"},[a("div",{staticClass:"sec flexbox flexcenter"},[a("div",{staticClass:"flex",staticStyle:{"margin-top":"20px"}},[a("el-radio-group",{attrs:{size:"medium"},on:{change:e.studyCircle},model:{value:e.radio4,callback:function(t){e.radio4=t},expression:"radio4"}},[a("el-radio-button",{attrs:{label:"我的学科圈"}}),e._v(" "),a("el-radio-button",{attrs:{label:"热门学科圈"}}),e._v(" "),a("el-radio-button",{attrs:{label:"最新学科圈"}})],1)],1),e._v(" "),a("div",[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){e.centerDialogVisible=!0}}},[e._v("创建学科圈")])],1)]),e._v(" "),a("div",{staticClass:"courseCon bf posr"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{align:"center",label:"学科圈名称",prop:"groupName",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"上传时间",prop:"createTime",width:"400"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"人气",prop:"view",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[4==t.row.joinState?a("div",[e.show?a("el-button",{staticClass:"scan",attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.findTeacherByCondition(t)}}},[e._v("添加成员")]):e._e()],1):e._e(),e._v(" "),1==t.row.joinState?a("div",[e.show?a("el-button",{attrs:{type:"info",size:"mini"}},[e._v("已经通过")]):e._e()],1):e._e(),e._v(" "),1==t.row.joinState?a("div",[e.show?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return e.applyJoinSubjectGroup(t)}}},[e._v("申请加入")]):e._e()],1):e._e(),e._v(" "),0==t.row.joinState?a("div",[e.show?a("el-button",{attrs:{type:"warning",size:"mini"}},[e._v("正在审核")]):e._e()],1):e._e(),e._v(" "),2==t.row.joinState?a("div",[e.show?a("el-button",{attrs:{type:"danger",size:"mini"}},[e._v("已经拒绝")]):e._e()],1):e._e(),e._v(" "),e.shows?a("el-button",{staticClass:"scan",attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("查看")]):e._e(),e._v(" "),e.shows?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"paginationed"},[a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:e.layout,total:e.total},on:{"size-change":e.handleSizeChangeFun,"current-change":e.handleCurrentChangeFun}})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.centerDialogVisible,"before-close":e.closeDialog,title:"创建学科圈",width:"30%"},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":""}},[a("el-form-item",{attrs:{label:"",prop:"name"}},[a("el-input",{attrs:{clearable:"",placeholder:"请填写学科圈名"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",[a("span",{staticClass:"dialog-footer tc"},[a("el-button",{on:{click:function(t){return e.callOf("ruleForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)])],1)],1),e._v(" "),a("el-dialog",{staticClass:"academicCircleapply",attrs:{title:"申请加入",visible:e.dialogVisible,"before-close":e.closeDialoga,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForms",staticClass:"demo-ruleForm",attrs:{model:e.ruleForms,rules:e.ruless,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"添加成员：",prop:"name"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入身份ID/用户名/手机号查找"},model:{value:e.ruleForms.name,callback:function(t){e.$set(e.ruleForms,"name",t)},expression:"ruleForms.name"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForms("ruleForms")}}},[e._v("查 找")])],1),e._v(" "),e.showsd?a("div",{staticClass:"applyPeople",class:{col39a:e.studentIdList==e.teacherByCondition.id},on:{click:function(t){return e.applyPeople(e.teacherByCondition.id)}}},[a("img",{staticClass:"img",attrs:{src:e.teacherByCondition.icon,alt:""}}),e._v(" "),a("p",{staticClass:"name"},[e._v(e._s(e.teacherByCondition.username))])]):e._e(),e._v(" "),a("el-form-item",[a("span",{staticClass:"dialog-footer tc"},[a("el-button",{on:{click:function(t){return e.callOfa("ruleForms")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForma("ruleForms")}}},[e._v("确 定")])],1)])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,o,!1,function(e){a("W8Tm"),a("fxSG")},"data-v-4c4fdd10",null);t.default=s.exports},W8Tm:function(e,t){},fxSG:function(e,t){}});
//# sourceMappingURL=39.5e67dfcd7c3cea4909c7.js.map