webpackJsonp([37],{HJND:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){var e=this,t=function(e,t,r){if(!t)return r(new Error("手机号不能为空"));var o=/^1[3|4|5|7|8][0-9]\d{8}$/;if(console.log(o.test(t)),!o.test(t))return r(new Error("请输入正确的手机号"));r()};return{flag:1,show:!0,showt:!1,count:60,count1:60,t:null,t1:null,text:"解绑手机号",ruleForm2:{oldpass:"",pass:"",checkPass:"",phone:"",code:""},ruleForm1:{phone:"",code:""},ruleForm:{oldpaw:"",paw:"",checkPaw:""},rules:{oldpaw:[{required:!0,message:"请输入原密码",trigger:"blur"}],paw:[{validator:function(t,r,o){""===r?o(new Error("请输入密码")):(""!==e.ruleForm.checkPaw&&e.$refs.ruleForm.validateField("checkPaw"),o())},trigger:"blur"}],checkPaw:[{validator:function(t,r,o){""===r?o(new Error("请再次输入密码")):r!==e.ruleForm.paw?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}]},rules2:{phone:[{required:!0,validator:t,trigger:"blur"}],oldpass:[{required:!0,message:"请输入原密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}],pass:[{validator:function(t,r,o){""===r?o(new Error("请输入密码")):(""!==e.ruleForm2.checkPass&&e.$refs.ruleForm2.validateField("checkPass"),o())},trigger:"blur"}],checkPass:[{validator:function(t,r,o){""===r?o(new Error("请再次输入密码")):r!==e.ruleForm2.pass?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}]},rules1:{phone:[{required:!0,validator:t,trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},created:function(){this.queryHasbindMobile()},methods:{getAuthCode:function(e){var t=this;60==this.count&&(this.count--,this.t=setInterval(function(e){t.count--,0==t.count&&(t.count=60,clearInterval(t.t))},1e3),this.$post("/sso/GetVerificationVode.do",{mobile:e}).then(function(e){"5000"==e.code&&t.$message({showClose:!0,message:"发送成功!",type:"success"})}))},getAuthCode1:function(e){var t=this;60==this.count1&&(this.count1--,this.t1=setInterval(function(e){t.count1--,0==t.count1&&(t.count1=60,clearInterval(t.t1))},1e3),this.$post("/sso/GetVerificationVode.do",{mobile:e}).then(function(e){"5000"==e.code&&t.$message({showClose:!0,message:"发送成功!",type:"success"})}))},getCode1:function(e){var t=this;this.$refs.ruleForm1.validateField("phone",function(e){if(!e){var r=t.ruleForm1.phone;t.getAuthCode1(r)}})},getCode:function(e){var t=this;this.$refs.ruleForm2.validateField("phone",function(e){if(!e){var r=t.ruleForm2.phone;t.getAuthCode(r)}})},queryHasbindMobile:function(){var e=this;this.$post("/sso/queryHasbindMobile.do").then(function(t){"5000"==t.code&&(1==t.data?(e.show=!0,e.showt=!1):(e.show=!1,e.showt=!0))})},submitFormpas:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var r=t.$loading({lock:!0,text:"提交中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",target:document.querySelector(".submit-test-dialog")}),o=t.ruleForm,s={newPwd:o.paw,oldPwd:o.oldpaw};t.$post("/sso/updateUserInfo.do",s).then(function(e){r.close(),"5000"==e.code?(t.$message({showClose:!0,message:"修改成功!",type:"success"}),t.$refs.ruleForm.resetFields(),t.flag=2,(t.flag=1)?t.text="解绑手机号":(t.flag=2)&&(t.text="绑定手机号")):t.$message({showClose:!0,message:e.message,type:"error"})})})},submitForms:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var r=t.$loading({lock:!0,text:"提交中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",target:document.querySelector(".submit-test-dialog")}),o=t.ruleForm1,s={verificationCode:o.code,mobile:o.phone,flag:t.flag};t.$post("/sso/updateUserInfo.do",s).then(function(e){r.close(),"5000"==e.code?(t.$message({showClose:!0,message:"解绑成功!",type:"success"}),t.count1=60,clearInterval(t.t1),t.$refs.ruleForm1.resetFields(),t.queryHasbindMobile()):t.$message({showClose:!0,message:e.message,type:"error"})})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var r=t.$loading({lock:!0,text:"提交中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",target:document.querySelector(".submit-test-dialog")}),o=t.ruleForm2,s={mobile:o.phone,pwd:o.pass,verificationCode:o.code};t.$post("/sso/bindMobile.do",s).then(function(e){r.close(),"5000"==e.code?(t.$message({showClose:!0,message:"绑定成功!",type:"success"}),t.count=60,clearInterval(t.t),t.$refs.ruleForm2.resetFields(),t.queryHasbindMobile()):t.$message({showClose:!0,message:e.message,type:"error"})})})}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"setting bf"},[r("div",{staticClass:"setting-con bx",staticStyle:{"padding-left":"150px"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showt,expression:"showt"}],staticClass:"changePassword"},[r("p",{staticClass:"tit ft18 myColor col39a"},[e._v("绑定手机号")]),e._v(" "),r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"新手机号码",prop:"phone"}},[r("el-input",{attrs:{type:"text",clearable:"",maxlength:"11"},on:{input:function(t){return e.ruleForm2.phone=e.validNumber(t)}},model:{value:e.ruleForm2.phone,callback:function(t){e.$set(e.ruleForm2,"phone",t)},expression:"ruleForm2.phone"}})],1),e._v(" "),r("el-form-item",{staticClass:"yzm",attrs:{label:"输入验证码",prop:"code"}},[r("el-input",{attrs:{maxlength:"6",clearable:"",placeholder:"验证码"},on:{input:function(t){return e.ruleForm2.code=e.validNumber(t)}},model:{value:e.ruleForm2.code,callback:function(t){e.$set(e.ruleForm2,"code",t)},expression:"ruleForm2.code"}}),e._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.getCode("phone")}}},[e._v(e._s(60==e.count?"获取验证码":"重新获取("+e.count+")"))])],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{attrs:{type:"password",clearable:"","auto-complete":"off"},model:{value:e.ruleForm2.pass,callback:function(t){e.$set(e.ruleForm2,"pass",t)},expression:"ruleForm2.pass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{attrs:{type:"password",clearable:"","auto-complete":"off"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.$set(e.ruleForm2,"checkPass",t)},expression:"ruleForm2.checkPass"}})],1),e._v(" "),r("el-form-item",[r("el-button",{staticClass:"apply",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm2")}}},[e._v("确定")])],1)],1)],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"changePassword"},[r("p",{staticClass:"tit ft18 col39a myColor"},[e._v("修改密码")]),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"原密码",prop:"oldpaw"}},[r("el-input",{attrs:{type:"password",clearable:"","auto-complete":"off"},model:{value:e.ruleForm.oldpaw,callback:function(t){e.$set(e.ruleForm,"oldpaw",t)},expression:"ruleForm.oldpaw"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"paw"}},[r("el-input",{attrs:{type:"password",clearable:"","auto-complete":"off"},model:{value:e.ruleForm.paw,callback:function(t){e.$set(e.ruleForm,"paw",t)},expression:"ruleForm.paw"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPaw"}},[r("el-input",{attrs:{type:"password",clearable:"","auto-complete":"off"},model:{value:e.ruleForm.checkPaw,callback:function(t){e.$set(e.ruleForm,"checkPaw",t)},expression:"ruleForm.checkPaw"}})],1),e._v(" "),r("el-form-item",[r("el-button",{staticClass:"apply",staticStyle:{"background-color":"#2ab8b3",color:"#fff",border:"0",width:"150px"},attrs:{type:"primary"},on:{click:function(t){return e.submitFormpas("ruleForm")}}},[e._v("确定")])],1)],1),e._v(" "),r("el-form",{ref:"ruleForm1",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm1,"status-icon":"",rules:e.rules1,"label-width":"100px"}},[r("p",{staticClass:"tit ft18 myColor col39a",staticStyle:{"margin-top":"50px"}},[e._v(e._s(e.text))]),e._v(" "),r("el-form-item",{attrs:{label:"原手机号码",prop:"phone"}},[r("el-input",{attrs:{type:"text",maxlength:"11",clearable:"","auto-complete":"off"},on:{input:function(t){return e.ruleForm1.phone=e.validNumber(t)}},model:{value:e.ruleForm1.phone,callback:function(t){e.$set(e.ruleForm1,"phone",t)},expression:"ruleForm1.phone"}})],1),e._v(" "),r("el-form-item",{staticClass:"yzm",attrs:{label:"输入验证码",prop:"code"}},[r("el-input",{attrs:{maxlength:"6",clearable:"",placeholder:"验证码"},on:{input:function(t){return e.ruleForm1.code=e.validNumber(t)}},model:{value:e.ruleForm1.code,callback:function(t){e.$set(e.ruleForm1,"code",t)},expression:"ruleForm1.code"}}),e._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.getCode1("phone")}}},[e._v(e._s(60==e.count1?"获取验证码":"重新获取("+e.count1+")"))])],1),e._v(" "),r("el-form-item",[r("el-button",{staticClass:"apply",staticStyle:{"background-color":"#2ab8b3",color:"#fff",border:"0",width:"150px"},attrs:{type:"primary"},on:{click:function(t){return e.submitForms("ruleForm1")}}},[e._v("确定")])],1)],1)],1),e._v(" "),r("div",{staticClass:"changePassword"},[r("p",{staticClass:"tit ft18 myColor col39a"},[e._v("找回密码问题设置")]),e._v(" "),r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{"status-icon":"","label-width":"100px"}},[r("el-form-item",{attrs:{label:"问题1",prop:"phone"}},[r("el-input",{attrs:{type:"text",clearable:"",maxlength:"11"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"答案1",prop:"phone"}},[r("el-input",{attrs:{type:"text",clearable:"",maxlength:"11"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"问题2",prop:"phone"}},[r("el-input",{attrs:{type:"text",clearable:"",maxlength:"11"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"答案2",prop:"phone"}},[r("el-input",{attrs:{type:"text",clearable:"",maxlength:"11"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"phone"}},[r("el-button",{staticStyle:{"background-color":"#2ab8b3",color:"#fff",border:"0",width:"150px"}},[e._v("确认")])],1)],1)],1)])])},staticRenderFns:[]};var l=r("VU/8")(o,s,!1,function(e){r("hsLH"),r("dFkg")},"data-v-5460b400",null);t.default=l.exports},dFkg:function(e,t){},hsLH:function(e,t){}});
//# sourceMappingURL=37.665634fcd7e49e1f1bca.js.map